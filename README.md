# Sentinel Review - å†…å®¹å®¡æŸ¥ç³»ç»Ÿ

[![Next.js](https://img.shields.io/badge/Framework-Next.js_15-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/Frontend-React_19-blue)](https://reactjs.org/)
[![License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)

Sentinel Review æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å†…å®¹å®¡æŸ¥ç³»ç»Ÿï¼Œç»“åˆäº†äººå·¥æ™ºèƒ½åˆ†æå’Œäººå·¥å¤æ ¸æœºåˆ¶ï¼Œå¹¶é€šè¿‡å›¾åƒæ¨¡ç³Šä¸æ–‡æœ¬æ¯’æ€§é™ä½æ¥ä¿æŠ¤äººç±»å®¡æ ¸å‘˜çš„å¿ƒç†å¥åº·ã€‚ç³»ç»Ÿé‡‡ç”¨ Next.js å…¨æ ˆæ¶æ„ï¼Œå‰ç«¯åŸºäº React + Tailwind CSS æ„å»ºï¼Œæä¾›ç›´è§‚æ˜“ç”¨çš„ä¸‰æ å¼ç•Œé¢ï¼›åç«¯ä½¿ç”¨ Next.js API Routes å®ç°å®‰å…¨çš„ä¸­é—´å±‚æœåŠ¡ï¼Œä¿æŠ¤æ•æ„Ÿçš„ API å¯†é’¥ã€‚

## ğŸ” åŠŸèƒ½ç‰¹æ€§

- **AI è¾…åŠ©å®¡æŸ¥**: é›†æˆ Dify AI å·¥ä½œæµï¼Œè‡ªåŠ¨åˆ†æå†…å®¹é£é™©
- **äººæœºååŒ**: æä¾›ç›´è§‚çš„ç•Œé¢ä¾›äººå·¥å¤æ ¸ AI åˆ†æç»“æœ
- **åŒæ¨¡å¼æ”¯æŒ**: æ”¯æŒå•æ¡å†…å®¹å®¡æŸ¥å’Œæ‰¹é‡å†…å®¹å®¡æŸ¥
- **å¤šåª’ä½“æ”¯æŒ**: åŒæ—¶æ”¯æŒæ–‡æœ¬å’Œå›¾åƒå†…å®¹çš„å®¡æŸ¥
- **æœ¬åœ°æ–‡ä»¶å¤„ç†**: è‡ªåŠ¨å¤„ç†æœ¬åœ°å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- **è¿œç¨‹ URL æ”¯æŒ**: æ”¯æŒè¿œç¨‹å›¾ç‰‡ URLï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- **å®‰å…¨æ¶æ„**: é€šè¿‡ä¸­é—´å±‚éšè—æ•æ„Ÿå‡­è¯ï¼Œä¿éšœç³»ç»Ÿå®‰å…¨
- **å“åº”å¼è®¾è®¡**: åŸºäº Tailwind CSS çš„ç°ä»£åŒ– UI è®¾è®¡
- **å›½é™…åŒ–æ”¯æŒ**: å†…ç½®ä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢
- **Netlify éƒ¨ç½²**: æ”¯æŒä¸€é”®éƒ¨ç½²åˆ° Netlify å¹³å°

## ğŸ“¦ å®‰è£…ä¸é…ç½®

### ç¯å¢ƒè¦æ±‚

- Node.js â‰¥ 18
- Dify å¹³å°è´¦å·åŠç›¸å…³é…ç½®

### å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–è€…ä½¿ç”¨ yarn
yarn install
# æˆ–è€…ä½¿ç”¨ pnpm
pnpm install
```

### ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼š
   ```bash
   cp .env.local.example .env.local
   ```

2. åœ¨ `.env.local` æ–‡ä»¶ä¸­è®¾ç½® Dify ç›¸å…³å‚æ•°ï¼š
   ```
   DIFY_BASE_URL=https://api.dify.ai/v1
   DIFY_API_KEY=your_api_key
   DIFY_APP_ID=your_app_id
   DIFY_USER_ID=sentinel-review-web
   ```

### å…¨æ ˆå¯åŠ¨æ–¹å¼

æœ¬é¡¹ç›®é‡‡ç”¨ Next.js å…¨æ ˆæ¶æ„ï¼Œå‰åç«¯é›†æˆåœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œæ— éœ€åˆ†åˆ«å¯åŠ¨ã€‚

#### å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿è¡Œå‰ç«¯å’Œ API åç«¯ï¼š

```bash
npm run dev
# æˆ–è€…ä½¿ç”¨ yarn
yarn dev
# æˆ–è€…ä½¿ç”¨ pnpm
pnpm dev
```

å¯åŠ¨åï¼š
- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **API ç«¯ç‚¹**: http://localhost:3000/api/review/singleã€http://localhost:3000/api/review/batch ç­‰
- æ”¯æŒçƒ­é‡è½½ï¼Œä»£ç ä¿®æ”¹åè‡ªåŠ¨åˆ·æ–°

#### ç”Ÿäº§æ¨¡å¼

1. **æ„å»ºé¡¹ç›®**ï¼š
   ```bash
   npm run build
   # æˆ–è€…ä½¿ç”¨ yarn
   yarn build
   # æˆ–è€…ä½¿ç”¨ pnpm
   pnpm build
   ```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**ï¼š
   ```bash
   npm start
   # æˆ–è€…ä½¿ç”¨ yarn
   yarn start
   # æˆ–è€…ä½¿ç”¨ pnpm
   pnpm start
   ```

   ç”Ÿäº§æœåŠ¡å™¨é»˜è®¤è¿è¡Œåœ¨ http://localhost:3000

#### æ¶æ„è¯´æ˜

- **å‰ç«¯**: Next.js App Router è‡ªåŠ¨å¤„ç† React ç»„ä»¶æ¸²æŸ“
- **åç«¯**: Next.js API Routes (`app/api/`) å¤„ç†æ‰€æœ‰ API è¯·æ±‚
- **ç»Ÿä¸€ç«¯å£**: å‰åç«¯å…±äº«åŒä¸€ä¸ªç«¯å£ï¼ˆé»˜è®¤ 3000ï¼‰ï¼Œæ— éœ€é…ç½®ä»£ç†
- **ç±»å‹å®‰å…¨**: TypeScript ç¡®ä¿å‰åç«¯ç±»å‹ä¸€è‡´æ€§

## ğŸš€ Netlify éƒ¨ç½²

### éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡ç¯å¢ƒå˜é‡**ï¼š
   - åœ¨ Netlify æ§åˆ¶å°çš„ "Site settings" > "Environment variables" ä¸­æ·»åŠ ï¼š
     - `DIFY_BASE_URL`
     - `DIFY_API_KEY`
     - `DIFY_APP_ID`
     - `DIFY_USER_ID`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `sentinel-review-web`ï¼‰

2. **è¿æ¥ä»“åº“**ï¼š
   - å°†ä»£ç æ¨é€åˆ° Git ä»“åº“ï¼ˆGitHubã€GitLab ç­‰ï¼‰
   - åœ¨ Netlify ä¸­è¿æ¥ä»“åº“

3. **æ„å»ºé…ç½®**ï¼š
   - Build command: `npm run build`
   - Publish directory: `.next`
   - Netlify ä¼šè‡ªåŠ¨æ£€æµ‹ `netlify.toml` é…ç½®

4. **æ³¨æ„äº‹é¡¹**ï¼š
   - æ‰¹é‡å®¡æ ¸åŠŸèƒ½ä¸­çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ `D:\materials\1.png`ï¼‰åœ¨ Netlify ä¸Šä¸å¯ç”¨
   - è¯·ä½¿ç”¨è¿œç¨‹ URLï¼ˆå¦‚ `https://example.com/image.jpg`ï¼‰
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒå¹¶æç¤ºç”¨æˆ·ä½¿ç”¨è¿œç¨‹ URL

## ğŸ— é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â”‚   â”œâ”€â”€ review/
â”‚   â”‚   â”‚   â”œâ”€â”€ single/          # å•æ¡å®¡æ ¸ API
â”‚   â”‚   â”‚   â””â”€â”€ batch/           # æ‰¹é‡å®¡æ ¸ API
â”‚   â”‚   â””â”€â”€ health/              # å¥åº·æ£€æŸ¥ API
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                 # ä¸»é¡µé¢
â”‚   â””â”€â”€ globals.css              # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                      # é€šç”¨UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚   â”‚   â”œâ”€â”€ Toast.tsx
â”‚   â”‚   â””â”€â”€ Tooltip.tsx
â”‚   â”œâ”€â”€ LeftPanel.tsx            # å·¦ä¾§é¢æ¿(è¾“å…¥åŒºåŸŸ)
â”‚   â”œâ”€â”€ CenterPanel.tsx          # ä¸­é—´é¢æ¿(æ ¸å¿ƒå¤æ ¸åŒºåŸŸ)
â”‚   â””â”€â”€ RightPanel.tsx           # å³ä¾§é¢æ¿(è¿›åº¦ä¸AIåˆ†æ)
â”œâ”€â”€ lib/                          # å…±äº«åº“
â”‚   â”œâ”€â”€ services/                # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ review.ts            # å®¡æ ¸æœåŠ¡ï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ reviewEngine.ts      # Dify å®¡æ ¸å¼•æ“ï¼ˆåç«¯ï¼‰
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ batchParser.ts      # æ‰¹é‡æ¨¡æ¿è§£æ
â”‚   â”œâ”€â”€ types.ts                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ translations.ts          # å›½é™…åŒ–èµ„æº
â”‚   â””â”€â”€ mockData.ts             # æ¼”ç¤ºæ•°æ®
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â””â”€â”€ logo.png
â”œâ”€â”€ next.config.js               # Next.js é…ç½®
â”œâ”€â”€ netlify.toml                 # Netlify éƒ¨ç½²é…ç½®
â”œâ”€â”€ tailwind.config.js           # Tailwind CSS é…ç½®
â””â”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
```

## ğŸ“ API è§„èŒƒ

è¯¦ç»†çš„ API è§„èŒƒè¯·å‚è€ƒ [docs/api-spec.md](docs/api-spec.md)ã€‚

### ä¸»è¦ API ç«¯ç‚¹

- `POST /api/review/single` - å•æ¡æ ·æœ¬å®¡æ ¸
- `POST /api/review/batch` - æ‰¹é‡æ ·æœ¬å®¡æ ¸
- `GET /api/health` - å¥åº·æ£€æŸ¥

## ğŸ”§ å¼€å‘è¯´æ˜

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 15 (App Router) - å…¨æ ˆæ¡†æ¶
- **å‰ç«¯**: React 19 + TypeScript
- **åç«¯**: Next.js API Routes (Route Handlers)
- **æ ·å¼**: Tailwind CSS
- **å›¾æ ‡**: Lucide React
- **æ–‡ä»¶å¤„ç†**: XLSX (CSV/Excel è§£æ)
- **HTTP å®¢æˆ·ç«¯**: å†…ç½® fetch APIï¼ˆNode.js 18+ï¼‰

### å…¨æ ˆæ¶æ„ä¼˜åŠ¿

- **ç»Ÿä¸€å¼€å‘**: å‰åç«¯ä»£ç åœ¨åŒä¸€é¡¹ç›®ä¸­ï¼Œå…±äº«ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°
- **æ— éœ€ä»£ç†**: å‰ç«¯ç›´æ¥è°ƒç”¨ `/api/*` ç›¸å¯¹è·¯å¾„ï¼ŒNext.js è‡ªåŠ¨è·¯ç”±åˆ° API Routes
- **ç±»å‹å®‰å…¨**: TypeScript ç±»å‹åœ¨å‰åç«¯ä¹‹é—´å…±äº«ï¼Œå‡å°‘æ¥å£ä¸ä¸€è‡´é—®é¢˜
- **çƒ­é‡è½½**: ä¿®æ”¹å‰ç«¯æˆ–åç«¯ä»£ç éƒ½ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½
- **éƒ¨ç½²ç®€å•**: å•å‘½ä»¤æ„å»ºï¼Œå•è¿›ç¨‹è¿è¡Œ

### æœ¬åœ°æ–‡ä»¶è·¯å¾„é™åˆ¶

- **å¼€å‘ç¯å¢ƒ**: æ”¯æŒæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼ˆå¦‚ `D:\materials\1.png`ï¼‰
- **ç”Ÿäº§ç¯å¢ƒï¼ˆNetlify/Vercelï¼‰**: ä»…æ”¯æŒè¿œç¨‹ URLï¼Œæœ¬åœ°è·¯å¾„ä¼šè¿”å›é”™è¯¯æç¤º

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª Next.js App Router æœ€ä½³å®è·µ
- å®¢æˆ·ç«¯ç»„ä»¶ä½¿ç”¨ `'use client'` æŒ‡ä»¤
- API Routes ä½¿ç”¨ Route Handlers (`app/api/*/route.ts`)
- å…±äº«ä»£ç æ”¾åœ¨ `lib/` ç›®å½•ï¼Œå‰åç«¯å‡å¯ä½¿ç”¨

## ğŸ“„ è®¸å¯è¯

MIT License
